% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/indicator_wrappers.R
\name{area_rarity_map}
\alias{area_rarity_map}
\alias{area_rarity_ts}
\alias{ab_rarity_map}
\alias{ab_rarity_ts}
\title{Calculate Rarity Over Time or Space}
\usage{
area_rarity_map(data, ...)

area_rarity_ts(data, ...)

ab_rarity_map(data, ...)

ab_rarity_ts(data, ...)
}
\arguments{
\item{data}{A data cube object (class 'processed_cube').}

\item{...}{
  Arguments passed on to \code{\link[=compute_indicator_workflow]{compute_indicator_workflow}}
  \describe{
    \item{\code{ci_type}}{(Optional) Type of bootstrap confidence intervals to
calculate. (Default: "norm". Select "none" to avoid calculating bootstrap
CIs.)}
    \item{\code{cell_size}}{(Optional) Length of grid cell sides, in km. (Default: 10
for country, 100 for continent or world)}
    \item{\code{level}}{(Optional) Spatial level: 'cube', 'continent', 'country',
'world', 'sovereignty', or 'geounit'. (Default: 'cube')}
    \item{\code{region}}{(Optional) The region of interest (e.g., "Europe"). (Default:
"Europe")}
    \item{\code{ne_type}}{(Optional) The type of Natural Earth data to download:
'countries', 'map_units', 'sovereignty', or 'tiny_countries'. (Default:
"countries")}
    \item{\code{ne_scale}}{(Optional) The scale of Natural Earth data to download:
'small' - 110m, 'medium' - 50m, or 'large' - 10m. (Default: "medium")}
    \item{\code{output_crs}}{(Optional) The CRS you want for your calculated indicator.
(Leave blank to let the function choose a default based on grid reference
system)}
    \item{\code{first_year}}{(Optinal) Exclude data before this year. (Uses all data in
the cube by default.)}
    \item{\code{last_year}}{(Optional) Exclude data after this year. (Uses all data in
the cube by default.)}
    \item{\code{spherical_geometry}}{(Optional) If set to FALSE, will temporarily
disable spherical geometry while the function runs. Should only be used to
solve specific issues. (Default is TRUE)}
    \item{\code{make_valid}}{(Optional) Calls st_make_valid() from the sf package.
Increases processing time but may help if you are getting polygon errors.
(Default is FALSE).}
    \item{\code{num_bootstrap}}{(Optional) Set the number of bootstraps to calculate for
generating confidence intervals. (Default: 1000)}
    \item{\code{shapefile_path}}{(optional) Path of an external shapefile to merge into
the workflow. For example, if you want to calculate your indicator
particular features such as protected areas or wetlands.}
    \item{\code{shapefile_crs}}{(Optional) CRS of a .wkt shapefile. If your shapefile
is .wkt and you do NOT use this parameter, the CRS will be assumed to be
EPSG:4326 and the coordinates will be read in as lat/long. If your shape is
NOT a .wkt the CRS will be determined automatically.}
    \item{\code{invert}}{(optional) Calculate an indicator over the inverse of the
shapefile (e.g. if you have a protected areas shapefile this would calculate
an indicator over all non protected areas)}
    \item{\code{include_ocean}}{(Optional) Include occurrences which fall outside the
land area. Default is TRUE. Set as "buffered_coast" to include a set buffer
size around the land area rather than the entire ocean area.}
    \item{\code{buffer_dist_km}}{(Optional) The distance to buffer around the land if
include_ocean is set to "buffered_coast".}
    \item{\code{force_grid}}{(Optional) Forces the calculation of a grid even if this
would not normally be part of the pipeline, e.g. for time series. This
setting is required for the calculation of rarity, and is turned on by the
ab_rarity_ts and area_rarity_ts wrappers. (Default: FALSE)}
  }}
}
\value{
An S3 object with the classes 'indicator_map' or 'indicator_ts' and
'area_rarity' or 'ab_rarity' containing the calculated indicator values and
metadata.
}
\description{
This function calculates area-based or abundance-based rarity
over a gridded map or as a time series (see 'Details' for more information).
}
\details{
\subsection{Rarity}{

Rarity is the scarcity or infrequency of a particular species in
an area. A rare species might have a small population size, a
limited distribution, or a unique ecological niche (Maciel,
2021; Rabinowitz, 1981). Rarity can also be a biodiversity
indicator when summed over multiple species in an area, and may
provide important insight for determining conservation
priorities. When measured over time, rarity may indicate
potential threats or changes in the environment.
}

\subsection{Abundance-Based Rarity}{

Abundance-based rarity is the inverse of the proportion of total occurrences
represented by a particular species. The total summed rarity for each grid
cell or year is calculated (sum the rarity values of each species present
there). It is calculated as:

\deqn{
  \sum_{i=1}^{S} \frac{1}{p_i}
}{
  Sum from i=1 to S of 1 / pi
}

where S is the number of species and pi is the proportion of occurrences
represented by species i.
}

\subsection{Area-Based Rarity}{

Area-based rarity is the inverse of occupancy frequency (proportion of grid
cells occupied) for a particular species. The total summed rarity for each
grid cell or year is calculated (sum the rarity values of each species
present there). It is calculated as:

\deqn{
  \sum_{i=1}^{S} \frac{N}{n_i}
}{
  Sum from i=1 to S of N / ni
}

where S is the number of species, N is the total number of occupied grid
cells, and ni is the number of grid cells occupied by species i.
}
}
\section{Functions}{
\itemize{
\item \code{area_rarity_map()}: 

\item \code{area_rarity_ts()}: 

\item \code{ab_rarity_map()}: 

\item \code{ab_rarity_ts()}: 

}}
\examples{
\dontrun{
arr_map <- area_rarity_map(example_cube_1, level = "country",
                           region = "Denmark")
plot(arr_map)
}
\dontrun{
arr_ts <- area_rarity_ts(example_cube_1, first_year = 1985)
plot(arr_ts)
}
\dontrun{
abr_map <- ab_rarity_map(example_cube_1, level = "country",
                         region = "Denmark")
plot(abr_map)
}
\dontrun{
abr_ts <- ab_rarity_ts(example_cube_1, first_year = 1985)
plot(abr_ts)
}
}
\references{
Maciel, E. A. (2021). An index for assessing the rare species of a community.
\emph{Ecological Indicators}, 124, 107424.

Rabinowitz, D. (1981). Seven forms of rarity. *Biological aspects of rare *
\emph{plant conservation}.
}
\seealso{
compute_indicator_workflow
}
