<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Processes a GBIF data cube and (if applicable) an associated taxonomic
information file. If your cube includes a taxonomic info file it is likely a
previous generation cube. The taxonomic info file must reside in the same directory
as your cube and share a base file name (e.g., 'cubes/my_mammals_cube.csv', 'cubes/my_mammals_info.csv').
If your cube does NOT include a taxonomic info file then it is likely a current
generation cube and will be automatically passed to the process_cube_new function.
As cube generation is more flexible for these cubes, you may need to provide
column names for some columns if they differ from the default names expected
by the function."><title>Process GBIF Data Cubes — process_cube • b3gbi</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/PT_Sans-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Process GBIF Data Cubes — process_cube"><meta property="og:description" content="Processes a GBIF data cube and (if applicable) an associated taxonomic
information file. If your cube includes a taxonomic info file it is likely a
previous generation cube. The taxonomic info file must reside in the same directory
as your cube and share a base file name (e.g., 'cubes/my_mammals_cube.csv', 'cubes/my_mammals_info.csv').
If your cube does NOT include a taxonomic info file then it is likely a current
generation cube and will be automatically passed to the process_cube_new function.
As cube generation is more flexible for these cubes, you may need to provide
column names for some columns if they differ from the default names expected
by the function."><meta property="og:image" content="https://b-cubed-eu.github.io/b3gbi/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">b3gbi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/b3gbi.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://b-cubed.eu/" aria-label="B-Cubed website">
    <span class="fa fa-cube"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/b-cubed-eu/b3gbi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Process GBIF Data Cubes</h1>
      <small class="dont-index">Source: <a href="https://github.com/b-cubed-eu/b3gbi/blob/HEAD/R/process_cube_functions.R" class="external-link"><code>R/process_cube_functions.R</code></a></small>
      <div class="d-none name"><code>process_cube.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Processes a GBIF data cube and (if applicable) an associated taxonomic
information file. If your cube includes a taxonomic info file it is likely a
previous generation cube. The taxonomic info file must reside in the same directory
as your cube and share a base file name (e.g., 'cubes/my_mammals_cube.csv', 'cubes/my_mammals_info.csv').
If your cube does NOT include a taxonomic info file then it is likely a current
generation cube and will be automatically passed to the process_cube_new function.
As cube generation is more flexible for these cubes, you may need to provide
column names for some columns if they differ from the default names expected
by the function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">process_cube</span><span class="op">(</span></span>
<span>  <span class="va">cube_name</span>,</span>
<span>  tax_info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  datasets_info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  first_year <span class="op">=</span> <span class="fl">1600</span>,</span>
<span>  last_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">process_cube_new</span><span class="op">(</span></span>
<span>  <span class="va">cube_name</span>,</span>
<span>  grid_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"automatic"</span>, <span class="st">"eea"</span>, <span class="st">"mgrs"</span>, <span class="st">"eqdgc"</span><span class="op">)</span>,</span>
<span>  first_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  last_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_yearmonth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_cellcode <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_occurrences <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_scientificname <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_mincoordinateuncertaintyinmeters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_mintemporaluncertainty <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_kingdom <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_family <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_species <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_kingdomkey <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_familykey <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_specieskey <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_familycount <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>cube_name</dt>
<dd><p>The location and name of a data cube file
(e.g., 'inst/extdata/europe_species_cube.csv').</p></dd>


<dt>tax_info</dt>
<dd><p>The location and name of an associated taxonomic info file
(e.g.,  'inst/extdata/europe_species_info.csv').</p></dd>


<dt>datasets_info</dt>
<dd><p>The location and name of an associated dataset info file
(e.g., 'inst/extdata/europe_species_datasets.csv').</p></dd>


<dt>first_year</dt>
<dd><p>(Optional) The first year of occurrences to include. If not
specified, uses a default of 1600 to prevent false records (e.g. with year = 0).</p></dd>


<dt>last_year</dt>
<dd><p>(Optional) The final year of occurrences to include. If not
specified, uses the latest year present in the cube.</p></dd>


<dt>...</dt>
<dd><p>Passes arguments to process_cube_new if you are using a cube generated
with the new GBIF API.</p></dd>


<dt>grid_type</dt>
<dd><p>Specify which grid reference system your cube uses. By default
the function will attempt to determine this automatically and return an error if it fails.</p></dd>


<dt>cols_year</dt>
<dd><p>The name of the column containing the year of occurrence (if
something other than 'year'). This column is required unless you have a yearMonth
column.</p></dd>


<dt>cols_yearmonth</dt>
<dd><p>The name of the column containing the year and month of
occurrence (if present and if other than 'yearMonth'). Use this if only if you
do not have a year column. The b3gbi package does not use month data, so the
function will convert your yearMonth column to a year column.</p></dd>


<dt>cols_cellcode</dt>
<dd><p>The name of the column containing the grid reference codes
(if other than 'cellCode'). This column is required.</p></dd>


<dt>cols_occurrences</dt>
<dd><p>The name of the column containing the number of occurrence
(if other than 'occurrences'). This column is required.</p></dd>


<dt>cols_scientificname</dt>
<dd><p>The name of the column containing the scientific name
of the species (if other than 'scientificName'). Note that it is not necessary
to have both a species column and a scientificName column. One or the other is
sufficient.</p></dd>


<dt>cols_mincoordinateuncertaintyinmeters</dt>
<dd><p>The name of the column containing
the minimum coordinate uncertainty of the occurrences (if other than
'minCoordinateUncertaintyinMeters').</p></dd>


<dt>cols_mintemporaluncertainty</dt>
<dd><p>The name of the column containing the minimum
temporal uncertainty of the occurrences (if other than 'minTemporalUncertainty').</p></dd>


<dt>cols_kingdom</dt>
<dd><p>The name of the column containing the kingdom the occurring
species belongs to (if other than 'kingdom'). This column is optional.</p></dd>


<dt>cols_family</dt>
<dd><p>The name of the column containing the family the occurring
species belongs to (if other than 'family'). This column is optional.</p></dd>


<dt>cols_species</dt>
<dd><p>The name of the column containing the name of the occurring
species (if other than 'species'). Note that it is not necessary to have both a
species column and a scientificName column. One or the other is sufficient.</p></dd>


<dt>cols_kingdomkey</dt>
<dd><p>The name of the column containing the kingdom key of the
occurring species (if other than 'kingdomKey'). This column is optinal.</p></dd>


<dt>cols_familykey</dt>
<dd><p>The name of the column containing the family key of the
occurring species (if other than 'familykey'). This column is optional.</p></dd>


<dt>cols_specieskey</dt>
<dd><p>The name of the column containing the species key of the
occurring species (if other than 'speciesKey'). This column is required, but
note that if you have a 'taxonKey' column you can provide it as the speciesKey.</p></dd>


<dt>cols_familycount</dt>
<dd><p>The name of the column containing the occurrence count
by family. This column is optional.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A tibble containing the processed GBIF occurrence data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">cube_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"europe_species_cube.csv"</span>, package <span class="op">=</span> <span class="st">"b3gbi"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tax_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"europe_species_info.csv"</span>, package <span class="op">=</span> <span class="st">"b3gbi"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">europe_example_cube</span> <span class="op">&lt;-</span> <span class="fu">process_cube</span><span class="op">(</span><span class="va">cube_name</span>, <span class="va">tax_info</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">europe_example_cube</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shawn Dove.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

