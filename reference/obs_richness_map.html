<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Observed Species Richness Over Space or Time — obs_richness_map • b3gbi</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/PT_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Calculate Observed Species Richness Over Space or Time — obs_richness_map"><meta name="description" content="This function calculates observed species richness over a
gridded map or as a time series (see 'Details' for more information)."><meta property="og:description" content="This function calculates observed species richness over a
gridded map or as a time series (see 'Details' for more information)."><meta property="og:image" content="https://b-cubed-eu.github.io/b3gbi/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">b3gbi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/b3gbi.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://b-cubed.eu/" aria-label="B-Cubed website"><span class="fa fa-cube"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/b-cubed-eu/b3gbi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate Observed Species Richness Over Space or Time</h1>
      <small class="dont-index">Source: <a href="https://github.com/b-cubed-eu/b3gbi/blob/main/R/indicator_wrappers.R" class="external-link"><code>R/indicator_wrappers.R</code></a></small>
      <div class="d-none name"><code>obs_richness_map.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates observed species richness over a
gridded map or as a time series (see 'Details' for more information).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">obs_richness_map</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">obs_richness_ts</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data cube object (class 'processed_cube').</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="compute_indicator_workflow.html">compute_indicator_workflow</a></code></p><dl><dt><code>ci_type</code></dt>
<dd><p>(Optional) Type of bootstrap confidence intervals to
calculate. (Default: "norm"). Select "none" to avoid calculating bootstrap
CIs.</p></dd>

    <dt><code>cell_size</code></dt>
<dd><p>(Optional) Length of grid cell sides, in km or degrees.
If NULL, this will be automatically determined according to the geographical
level selected. This is 100 km or 1 degree for 'continent' or 'world', 10 km
or (for a degree-based CRS) the native resolution of the cube for 'country',
'sovereignty' or 'geounit'. If level is set to 'cube', cell size will be the
native resolution of the cube for a degree-based CRS, or for a km-based CRS,
the cell size will be determined by the area of the cube: 100 km for cubes
larger than 1 million sq km, 10 km for cubes between 10 thousand and 1
million sq km, 1 km for cubes between 100 and 10 thousand sq km, and 0.1 km
for cubes smaller than 100 sq km. (Default: NULL)</p></dd>

    <dt><code>level</code></dt>
<dd><p>(Optional) Spatial level: 'cube', 'continent', 'country',
'world', 'sovereignty', or 'geounit'. (Default: 'cube')</p></dd>

    <dt><code>region</code></dt>
<dd><p>(Optional) The region of interest (e.g., "Europe"). This
parameter is ignored if level is set to 'cube' or 'world'. (Default: NULL)</p></dd>

    <dt><code>ne_type</code></dt>
<dd><p>(Optional) The type of Natural Earth data to download:
'countries', 'map_units', 'sovereignty', or 'tiny_countries'. This parameter
is ignored if level is set to 'cube' or 'world'. (Default: "countries")</p></dd>

    <dt><code>ne_scale</code></dt>
<dd><p>(Optional) The scale of Natural Earth data to download:
'small' - 110m, 'medium' - 50m, or 'large' - 10m. (Default: "medium")</p></dd>

    <dt><code>output_crs</code></dt>
<dd><p>(Optional) The CRS you want for your calculated indicator.
(Leave blank to let the function choose a default based on grid reference
system.)</p></dd>

    <dt><code>first_year</code></dt>
<dd><p>(Optional) Exclude data before this year. (Uses all data in
the cube by default.)</p></dd>

    <dt><code>last_year</code></dt>
<dd><p>(Optional) Exclude data after this year. (Uses all data in
the cube by default.)</p></dd>

    <dt><code>spherical_geometry</code></dt>
<dd><p>(Optional) If set to FALSE, will temporarily
disable spherical geometry while the function runs. Should only be used to
solve specific issues. (Default is TRUE).</p></dd>

    <dt><code>make_valid</code></dt>
<dd><p>(Optional) Calls st_make_valid() from the sf package
after creating the grid. Increases processing time but may help if you are
getting polygon errors. (Default is FALSE).</p></dd>

    <dt><code>num_bootstrap</code></dt>
<dd><p>(Optional) Set the number of bootstraps to calculate for
generating confidence intervals. (Default: 100)</p></dd>

    <dt><code>shapefile_path</code></dt>
<dd><p>(optional) Path of an external shapefile to merge into
the workflow. For example, if you want to calculate your indicator
particular features such as protected areas or wetlands.</p></dd>

    <dt><code>shapefile_crs</code></dt>
<dd><p>(Optional) CRS of a .wkt shapefile. If your shapefile
is .wkt and you do NOT use this parameter, the CRS will be assumed to be
EPSG:4326 and the coordinates will be read in as lat/long. If your shape is
NOT a .wkt the CRS will be determined automatically.</p></dd>

    <dt><code>invert</code></dt>
<dd><p>(optional) Calculate an indicator over the inverse of the
shapefile (e.g. if you have a protected areas shapefile this would calculate
an indicator over all non protected areas within your cube). Default is
FALSE.</p></dd>

    <dt><code>include_land</code></dt>
<dd><p>(Optional) Include occurrences which fall within the
land area. Default is TRUE. *Note that this purely a geographic filter, and
does not filter based on whether the occurrence is actually terrestrial.
Grid cells which fall partially on land and partially on ocean will be
included even if include_land is FALSE. To exclude terrestrial and/or
freshwater taxa, you must manually filter your data cube before calculating
your indicator.</p></dd>

    <dt><code>include_ocean</code></dt>
<dd><p>(Optional) Include occurrences which fall outside the
land area. Default is TRUE. Set as "buffered_coast" to include a set buffer
size around the land area rather than the entire ocean area. *Note that this
is purely a geographic filter, and does not filter based on whether the
occurrence is actually marine. Grid cells which fall partially on land and
partially on ocean will be included even if include_ocean is FALSE. To
exclude marine taxa, you must manually filter your data cube before
calculating your indicator.</p></dd>

    <dt><code>buffer_dist_km</code></dt>
<dd><p>(Optional) The distance to buffer around the land if
include_ocean is set to "buffered_coast". Default is 50 km.</p></dd>

    <dt><code>force_grid</code></dt>
<dd><p>(Optional) Forces the calculation of a grid even if this
would not normally be part of the pipeline, e.g. for time series. This
setting is required for the calculation of rarity, and is turned on by the
ab_rarity_ts and area_rarity_ts wrappers. (Default: FALSE)</p></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An S3 object with the classes 'indicator_map' or 'indicator_ts' and
'obs_richness' containing the calculated indicator values and metadata.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="species-richness">Species richness<a class="anchor" aria-label="anchor" href="#species-richness"></a></h3>


<p>Species richness is the total number of species present in a
sample (Magurran, 1988). It is a fundamental and commonly used
measure of biodiversity, providing a simple and intuitive
overview of the status of biodiversity. However, richness is not
well suited to measuring biodiversity change over time, as it
only decreases when local extinctions occur and thus lags behind
abundance for negative trends. While it may act as a leading
indicator of alien species invasions, it will not indicate
establishment because it ignores abundance. Nor will it
necessarily indicate changes in local species composition, which
can occur without any change in richness. Although richness is
conceptually simple, it can be measured in different ways.</p>
</div>

<div class="section">
<h3 id="observed-richness">Observed richness<a class="anchor" aria-label="anchor" href="#observed-richness"></a></h3>


<p>Observed richness is calculated by summing the number of unique species
observed for each year or each cell. Observed richness is highly dependent
on the comprehensiveness of the dataset it is being applied to. If some
regions are more intensively, carefully or systematically sampled than
others, this will likely reflect as higher observed richness. Observed
richness also depends on the relative abundance and spatial aggregation of
each species, with less abundant and less aggregated species less likely to
be discovered during surveys (Hillebrand et al., 2018), as well as the
detectability of each species.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>obs_richness_map()</code>:</p></li>
<li><p><code>obs_richness_ts()</code>:</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Hillebrand, H., Blasius, B., Borer, E. T., Chase, J. M., Downing, J. A.,
Eriksson, B. K., Filstrup, C. T., Harpole, W. S., Hodapp, D., Larsen, S.,
Lewandowska, A. M., Seabloom, E. W., Van de Waal, D. B., &amp; Ryabov, A. B.
(2018). Biodiversity change is uncoupled from species richness trends:
Consequences for conservation and monitoring. <em>Journal of Applied Ecology</em>,
<em>55</em>(1), 169-184.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>compute_indicator_workflow</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">or_map</span> <span class="op">&lt;-</span> <span class="fu">obs_richness_map</span><span class="op">(</span><span class="va">example_cube_1</span>, level <span class="op">=</span> <span class="st">"country"</span>,</span></span>
<span class="r-in"><span>                           region <span class="op">=</span> <span class="st">"Denmark"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">or_map</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">or_ts</span> <span class="op">&lt;-</span> <span class="fu">obs_richness_ts</span><span class="op">(</span><span class="va">example_cube_1</span>, first_year <span class="op">=</span> <span class="fl">1985</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">or_ts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shawn Dove.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

