<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Evenness Over Time or Space — pielou_evenness_map • b3gbi</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/PT_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Calculate Evenness Over Time or Space — pielou_evenness_map"><meta name="description" content="Calculate evenness over a gridded map or as a time series (see
'Details' for more information)."><meta property="og:description" content="Calculate evenness over a gridded map or as a time series (see
'Details' for more information)."><meta property="og:image" content="https://b-cubed-eu.github.io/b3gbi/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">b3gbi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/b3gbi.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://b-cubed.eu/" aria-label="B-Cubed website"><span class="fa fa-cube"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/b-cubed-eu/b3gbi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate Evenness Over Time or Space</h1>
      <small class="dont-index">Source: <a href="https://github.com/b-cubed-eu/b3gbi/blob/main/R/indicator_wrappers.R" class="external-link"><code>R/indicator_wrappers.R</code></a></small>
      <div class="d-none name"><code>pielou_evenness_map.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate evenness over a gridded map or as a time series (see
'Details' for more information).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pielou_evenness_map</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pielou_evenness_ts</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">williams_evenness_map</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">williams_evenness_ts</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data cube object (class 'processed_cube').</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="compute_indicator_workflow.html">compute_indicator_workflow</a></code></p><dl><dt><code>ci_type</code></dt>
<dd><p>Type of bootstrap confidence intervals to calculate. (Default: "norm".
Select "none" to avoid calculating bootstrap CIs.)</p></dd>

    <dt><code>cell_size</code></dt>
<dd><p>Length of grid cell sides, in km. (Default: 10 for country, 100 for continent or world)</p></dd>

    <dt><code>level</code></dt>
<dd><p>Spatial level: 'cube', 'continent', 'country', 'world', 'sovereignty',
or 'geounit'. (Default: 'cube')</p></dd>

    <dt><code>region</code></dt>
<dd><p>The region of interest (e.g., "Europe"). (Default: "Europe")</p></dd>

    <dt><code>ne_type</code></dt>
<dd><p>The type of Natural Earth data to download: 'countries', 'map_units',
'sovereignty', or 'tiny_countries'. (Default: "countries")</p></dd>

    <dt><code>ne_scale</code></dt>
<dd><p>The scale of Natural Earth data to download: 'small' - 110m,
'medium' - 50m, or 'large' - 10m. (Default: "medium")</p></dd>

    <dt><code>output_crs</code></dt>
<dd><p>The CRS you want for your calculated indicator. (Leave blank
to let the function choose a default based on grid reference system)</p></dd>

    <dt><code>first_year</code></dt>
<dd><p>Exclude data before this year. (Uses all data in the cube by default.)</p></dd>

    <dt><code>last_year</code></dt>
<dd><p>Exclude data after this year. (Uses all data in the cube by default.)</p></dd>

    <dt><code>spherical_geometry</code></dt>
<dd><p>If set to FALSE, will temporarily disable spherical geometry
while the function runs. Should only be used to solve specific issues. (Default is TRUE)</p></dd>

    <dt><code>make_valid</code></dt>
<dd><p>Calls st_make_valid() from the sf package. Increases processing
time but may help if you are getting polygon errors. (Default is FALSE).</p></dd>

    <dt><code>num_bootstrap</code></dt>
<dd><p>Set the number of bootstraps to calculate for generating
confidence intervals. (Default: 1000)</p></dd>

    <dt><code>crs_unit_convert</code></dt>
<dd><p>Force a particular output CRS even when it has
different units than the input CRS. (Default: FALSE)</p></dd>

    <dt><code>shapefile_path</code></dt>
<dd><p>Path of an external shapefile to merge into the workflow. For example,
if you want to calculate your indicator particular features such as protected areas or wetlands.</p></dd>

    <dt><code>invert</code></dt>
<dd><p>Calculate an indicator over the inverse of the shapefile (e.g.
if you have a protected areas shapefile this would calculate an indicator over
all non protected areas)</p></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An S3 object with the classes 'indicator_map' or 'indicator_ts' and
'pielou_evenness' or 'williams_evenness' containing the calculated indicator
values and metadata.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="evenness">Evenness<a class="anchor" aria-label="anchor" href="#evenness"></a></h3>


<p>Species evenness is a commonly used indicator that measures how
uniformly individuals are distributed across species in a region
or over time. It provides a complement to richness by taking
relative abundance into account. Although GBIF provides
information about abundances as individual counts, the majority
of entries lack this information. Hence, evenness can only be
calculated using the proportions of observations rather than
proportions of individuals. Strictly speaking, the evenness
measures therefore indicate how uniformly species are
represented in the respective data set rather than the true
evenness of the ecological community.</p>
</div>

<div class="section">
<h3 id="pielou-s-evenness">Pielou's evenness<a class="anchor" aria-label="anchor" href="#pielou-s-evenness"></a></h3>


<p>Pielou's evenness (1966) is a well-known and commonly
used evenness measure. It is calculated as:</p>
<p>$$
 E = \frac{-\sum_{i=1}^{S} p_i \ln(p_i)}{\ln(S)}
$$
where S is the number of species and pi is the proportion of occurrences
represented by species i.</p>
</div>

<div class="section">
<h3 id="williams-evenness">Williams' evenness<a class="anchor" aria-label="anchor" href="#williams-evenness"></a></h3>


<p>An analysis of evenness properties by Kvålseth (2015) showed
that an evenness index introduced by Williams in 1977 in an
unpublished manuscript has two important properties which
Pielou's does not. The properties in question are complex
mathematical properties known as the Schur-Concavity and
value validity, but we attempt to describe them here more
simply. If a measure of evenness is Schur-concave, it means
that when the distribution of individuals becomes more evenly
spread across species, the measure of evenness will stay the
same or increase, but never decrease. Value validity means
that an evenness index should provide sensible and meaningful
values across its range for any given distribution of species
abundances. Kvålseth referred to this evenness measure as E9
but we refer to it as Williams' evenness.</p>
<p>Williams' evenness is calculated as:</p>
<p>$$
  1 - \sqrt{\frac{S\sum_{i=1}^{S} p_i^2 - 1}{S - 1}}
$$</p>
<p>where S is the number of species and pi is the proportion of occurrences
represented by species i.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>pielou_evenness_map()</code>:</p></li>
<li><p><code>pielou_evenness_ts()</code>:</p></li>
<li><p><code>williams_evenness_map()</code>:</p></li>
<li><p><code>williams_evenness_ts()</code>:</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Pielou, E. C. (1966). The measurement of diversity in
different types of biological collections. <em>Journal of theoretical biology</em>,
<em>13</em>, 131-144.</p>
<p>Kvålseth, T. O. (2015). Evenness indices once again: critical analysis of
properties. <em>SpringerPlus</em>, <em>4</em>, 1-12.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>compute_indicator_workflow</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pe_map</span> <span class="op">&lt;-</span> <span class="fu">pielou_evenness_map</span><span class="op">(</span><span class="va">example_cube_1</span>, level <span class="op">=</span> <span class="st">"country"</span>, region <span class="op">=</span> <span class="st">"Denmark"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pe_map</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pe_ts</span> <span class="op">&lt;-</span> <span class="fu">pielou_evenness_ts</span><span class="op">(</span><span class="va">example_cube_1</span>, first_year <span class="op">=</span> <span class="fl">1985</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pe_ts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">we_map</span> <span class="op">&lt;-</span> <span class="fu">williams_evenness_map</span><span class="op">(</span><span class="va">example_cube_1</span>, level <span class="op">=</span> <span class="st">"country"</span>, region <span class="op">=</span> <span class="st">"Denmark"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">we_map</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">we_ts</span> <span class="op">&lt;-</span> <span class="fu">williams_evenness_ts</span><span class="op">(</span><span class="va">example_cube_1</span>, first_year <span class="op">=</span> <span class="fl">1985</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">we_ts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shawn Dove.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

